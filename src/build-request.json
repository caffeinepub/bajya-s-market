{
  "kind": "build_request",
  "title": "Generate a downloadable Android APK (TWA wrapper for the deployed PWA)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Produce an installable Android **debug APK** for the currently deployed PWA using the existing Bubblewrap Trusted Web Activity (TWA) workflow, and expose the resulting `app-debug.apk` as a downloadable build artifact/output for the user.",
      "target": "unknown",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Yes genrate downloadable apk file"
        ]
      },
      "acceptanceCriteria": [
        "A debug APK is generated via Bubblewrap build (TWA) for the live PWA manifest URL.",
        "The resulting file is available to the user as a downloadable artifact named `app-debug.apk` (or includes clear, explicit instructions on where to retrieve it from the build outputs if artifact download is platform-mediated).",
        "The APK installs successfully on an Android device/emulator and launches into the PWA without browser UI chrome."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the PWA icon assets referenced by `frontend/public/manifest.webmanifest` exist under `frontend/public/assets/generated/` and match the required sizes (192x192, 512x512, 512x512 maskable).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Yes genrate downloadable apk file"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/public/assets/generated/pwa-icon-192.dim_192x192.png` exists and is 192×192.",
        "`frontend/public/assets/generated/pwa-icon-512.dim_512x512.png` exists and is 512×512.",
        "`frontend/public/assets/generated/pwa-icon-maskable-512.dim_512x512.png` exists and is 512×512 and visually suitable as a maskable icon.",
        "`frontend/public/manifest.webmanifest` icon `src` entries resolve correctly when the site is deployed (no 404s)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add a simple repo-local, English-language reference (or update the existing guide) describing the exact command(s) to generate the debug APK using the existing scripts, and state the expected output path of the APK so a developer/user can reproduce the downloadable build.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Yes genrate downloadable apk file"
        ]
      },
      "acceptanceCriteria": [
        "Documentation clearly states the manifest URL used for TWA init and the command(s) to build the debug APK.",
        "Documentation includes the expected Bubblewrap output path for the debug APK and a short note on installing it via `adb install`.",
        "All user-facing documentation text is in English."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo` (no additional backend services).",
    "Do not edit files under `frontend/src/components/ui` or the immutable hook/bootstrap paths listed in SYSTEM_CONTEXT.",
    "Do not introduce external databases or non-Internet-Identity authentication."
  ],
  "nonGoals": [
    "Implementing a native Android app (non-TWA) with custom native screens.",
    "Adding mobile push notifications, deep native integrations, or third-party auth providers.",
    "Publishing to Google Play Store (AAB submission) unless separately requested."
  ],
  "imageRequirements": {
    "required": [
      "App icon, square (pwa-icon-192.dim_192x192.png) 192x192",
      "App icon, square (pwa-icon-512.dim_512x512.png) 512x512",
      "App icon, maskable safe-area design (pwa-icon-maskable-512.dim_512x512.png) 512x512"
    ],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}