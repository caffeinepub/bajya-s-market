{
  "kind": "build_request",
  "title": "Package the current PWA into a downloadable Android APK artifact (TWA)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Generate an installable Android debug APK that wraps the live PWA at https://bajyasmarketshop.icp0.io using the existing Bubblewrap Trusted Web Activity (TWA) workflow, and output the resulting APK as a downloadable build artifact at `frontend/artifacts/app-debug.apk`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Wrap it into downloadable apk"
        ]
      },
      "acceptanceCriteria": [
        "Running `cd frontend/scripts && ./twa-build-apk-debug.sh` successfully builds a debug APK using Bubblewrap.",
        "After a successful build, the file `frontend/artifacts/app-debug.apk` exists and is the latest build output (copied from Bubblewrapâ€™s `app/build/outputs/apk/debug/app-debug.apk`).",
        "The produced APK installs on an Android device/emulator and launches into the wrapped PWA domain (`bajyasmarketshop.icp0.io`)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the PWA icon assets referenced by `frontend/public/manifest.webmanifest` exist under `frontend/public/assets/generated/` and match the required sizes, so TWA initialization/build does not fail due to missing icons.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Wrap it into downloadable apk"
        ]
      },
      "acceptanceCriteria": [
        "The following files exist in `frontend/public/assets/generated/` and have the exact pixel dimensions indicated in their filenames: `pwa-icon-192.dim_192x192.png`, `pwa-icon-512.dim_512x512.png`, and `pwa-icon-maskable-512.dim_512x512.png`.",
        "`frontend/public/manifest.webmanifest` references icons that resolve correctly at runtime (no 404s when fetching the manifest and icon URLs)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Provide or update repo-local English documentation that states the exact command(s) to generate the debug APK using the existing scripts and the expected output path of the downloadable APK artifact.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Wrap it into downloadable apk"
        ]
      },
      "acceptanceCriteria": [
        "Documentation includes the command to run (from repo root) to build the debug APK via the helper script.",
        "Documentation explicitly states that the expected downloadable output is `frontend/artifacts/app-debug.apk`.",
        "Documentation mentions required local prerequisites (Bubblewrap CLI, Java/JDK, Android SDK) at a high level or links to the existing guide section that lists them."
      ]
    }
  ],
  "constraints": [
    "Do not modify files under `frontend/src/components/ui` (read-only).",
    "Do not modify immutable hook/bootstrap files: `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`.",
    "Keep backend architecture as a single Motoko actor; no additional backend services."
  ],
  "nonGoals": [
    "Publishing the app to Google Play Store (AAB upload, store listing, signing key management) beyond providing local build instructions/scripts.",
    "Implementing any native Android features beyond a TWA wrapper for the existing PWA.",
    "Adding any non-Internet-Computer authentication providers or external databases/services."
  ],
  "imageRequirements": {
    "required": [
      "App icon, square (pwa-icon-192.dim_192x192.png) 192x192",
      "App icon, square (pwa-icon-512.dim_512x512.png) 512x512",
      "App icon, maskable safe-area design (pwa-icon-maskable-512.dim_512x512.png) 512x512"
    ],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}