{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Build and document Bubblewrap TWA debug APK artifact for the live PWA",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Ensure the existing Bubblewrap helper script builds a debug APK and outputs it as a predictable downloadable artifact at frontend/artifacts/app-debug.apk.",
      "acceptanceCriteria": [
        "Running `cd frontend/scripts && ./twa-build-apk-debug.sh` successfully builds a debug APK using Bubblewrap.",
        "After a successful build, the file `frontend/artifacts/app-debug.apk` exists and is the latest build output (copied from Bubblewrapâ€™s `app/build/outputs/apk/debug/app-debug.apk`).",
        "The produced APK installs on an Android device/emulator and launches into the wrapped PWA domain (`bajyasmarketshop.icp0.io`)."
      ],
      "file_operations": [
        {
          "path": "frontend/scripts/twa-build-apk-debug.sh",
          "operation": "modify",
          "description": "Harden the debug APK build script for the Bubblewrap TWA workflow: add prerequisite checks (e.g., Bubblewrap CLI present), validate/normalize artifact copy path so the final output is always `frontend/artifacts/app-debug.apk` when run via `cd frontend/scripts && ./twa-build-apk-debug.sh`, and keep the wrapped PWA manifest URL/domain set to `https://bajyasmarketshop.icp0.io/manifest.webmanifest` / `bajyasmarketshop.icp0.io`."
        },
        {
          "path": "frontend/artifacts/.gitkeep",
          "operation": "modify",
          "description": "Keep the artifacts directory tracked and clarify (via comment if supported by the repo conventions) that `frontend/artifacts/app-debug.apk` is a generated build output produced by the TWA script."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Ensure the PWA icon assets referenced by the manifest exist in frontend/public/assets/generated with the required sizes so Bubblewrap init/build does not fail.",
      "acceptanceCriteria": [
        "The following files exist in `frontend/public/assets/generated/` and have the exact pixel dimensions indicated in their filenames: `pwa-icon-192.dim_192x192.png`, `pwa-icon-512.dim_512x512.png`, and `pwa-icon-maskable-512.dim_512x512.png`.",
        "`frontend/public/manifest.webmanifest` references icons that resolve correctly at runtime (no 404s when fetching the manifest and icon URLs)."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/pwa-icon-192.dim_192x192.png",
          "operation": "create",
          "description": "Add/ensure the 192x192 PWA icon asset exists at this exact path for manifest/TWA usage."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon-512.dim_512x512.png",
          "operation": "create",
          "description": "Add/ensure the 512x512 PWA icon asset exists at this exact path for manifest/TWA usage."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon-maskable-512.dim_512x512.png",
          "operation": "create",
          "description": "Add/ensure the 512x512 maskable PWA icon asset exists at this exact path for manifest/TWA usage."
        },
        {
          "path": "frontend/public/manifest.webmanifest",
          "operation": "modify",
          "description": "Verify the manifest icon entries reference the exact generated asset filenames under `frontend/public/assets/generated/` (192x192, 512x512, and maskable 512x512) so the URLs resolve without 404s at runtime."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Update repo-local English documentation with the exact commands to build the debug APK via scripts and the expected output artifact path.",
      "acceptanceCriteria": [
        "Documentation includes the command to run (from repo root) to build the debug APK via the helper script.",
        "Documentation explicitly states that the expected downloadable output is `frontend/artifacts/app-debug.apk`.",
        "Documentation mentions required local prerequisites (Bubblewrap CLI, Java/JDK, Android SDK) at a high level or links to the existing guide section that lists them."
      ],
      "file_operations": [
        {
          "path": "frontend/docs/PLAY_STORE_TWA_GUIDE.md",
          "operation": "modify",
          "description": "Add or update a clearly labeled section that documents (1) the exact repo-root command to build the debug APK using the helper script (`cd frontend/scripts && ./twa-build-apk-debug.sh`), (2) that the expected downloadable artifact output is `frontend/artifacts/app-debug.apk`, and (3) high-level prerequisites (Bubblewrap CLI, Java/JDK, Android SDK) or a link/reference to the prerequisites section already in this guide."
        }
      ]
    }
  ]
}